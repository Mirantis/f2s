id: primary-controller
resources:
- id: role_data#{index}#
  from: fuel_resources/role_data
  location: '#{node}#'
  values:
    env: '#{env}#'
    puppet_modules: /etc/puppet/modules
    uid: '#{index}#'
- id: fuel_pkgs#{index}#
  from: fuel_resources/fuel_pkgs
  location: '#{node}#'
  values_from: role_data#{index}#
- id: logging#{index}#
  from: fuel_resources/logging
  location: '#{node}#'
  values_from: role_data#{index}#
- id: tools#{index}#
  from: fuel_resources/tools
  location: '#{node}#'
  values_from: role_data#{index}#
- id: umm#{index}#
  from: fuel_resources/umm
  location: '#{node}#'
  values_from: role_data#{index}#
- id: netconfig#{index}#
  from: fuel_resources/netconfig
  location: '#{node}#'
  values_from: role_data#{index}#
- id: connectivity_tests#{index}#
  from: fuel_resources/connectivity_tests
  location: '#{node}#'
  values_from: role_data#{index}#
- id: firewall#{index}#
  from: fuel_resources/firewall
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ssl-keys-saving#{index}#
  from: fuel_resources/ssl-keys-saving
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ssl-add-trust-chain#{index}#
  from: fuel_resources/ssl-add-trust-chain
  location: '#{node}#'
  values_from: role_data#{index}#
- id: hosts#{index}#
  from: fuel_resources/hosts
  location: '#{node}#'
  values_from: role_data#{index}#
- id: cluster#{index}#
  from: fuel_resources/cluster
  location: '#{node}#'
  values_from: role_data#{index}#
- id: cluster_health#{index}#
  from: fuel_resources/cluster_health
  location: '#{node}#'
  values_from: role_data#{index}#
- id: cluster-vrouter#{index}#
  from: fuel_resources/cluster-vrouter
  location: '#{node}#'
  values_from: role_data#{index}#
- id: virtual_ips#{index}#
  from: fuel_resources/virtual_ips
  location: '#{node}#'
  values_from: role_data#{index}#
- id: conntrackd#{index}#
  from: fuel_resources/conntrackd
  location: '#{node}#'
  values_from: role_data#{index}#
- id: cluster-haproxy#{index}#
  from: fuel_resources/cluster-haproxy
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-ceilometer#{index}#
  from: fuel_resources/openstack-haproxy-ceilometer
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-radosgw#{index}#
  from: fuel_resources/openstack-haproxy-radosgw
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-horizon#{index}#
  from: fuel_resources/openstack-haproxy-horizon
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-swift#{index}#
  from: fuel_resources/openstack-haproxy-swift
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-nova#{index}#
  from: fuel_resources/openstack-haproxy-nova
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-glance#{index}#
  from: fuel_resources/openstack-haproxy-glance
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-sahara#{index}#
  from: fuel_resources/openstack-haproxy-sahara
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-cinder#{index}#
  from: fuel_resources/openstack-haproxy-cinder
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-keystone#{index}#
  from: fuel_resources/openstack-haproxy-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-murano#{index}#
  from: fuel_resources/openstack-haproxy-murano
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-stats#{index}#
  from: fuel_resources/openstack-haproxy-stats
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-ironic#{index}#
  from: fuel_resources/openstack-haproxy-ironic
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-heat#{index}#
  from: fuel_resources/openstack-haproxy-heat
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-neutron#{index}#
  from: fuel_resources/openstack-haproxy-neutron
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy-mysqld#{index}#
  from: fuel_resources/openstack-haproxy-mysqld
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-haproxy#{index}#
  from: fuel_resources/openstack-haproxy
  location: '#{node}#'
  values_from: role_data#{index}#
- id: dns-server#{index}#
  from: fuel_resources/dns-server
  location: '#{node}#'
  values_from: role_data#{index}#
- id: database#{index}#
  from: fuel_resources/database
  location: '#{node}#'
  values_from: role_data#{index}#
- id: keystone-db#{index}#
  from: fuel_resources/keystone-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: glance-db#{index}#
  from: fuel_resources/glance-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ironic-db#{index}#
  from: fuel_resources/ironic-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: neutron-db#{index}#
  from: fuel_resources/neutron-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: murano-db#{index}#
  from: fuel_resources/murano-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: nova-db#{index}#
  from: fuel_resources/nova-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: cinder-db#{index}#
  from: fuel_resources/cinder-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: sahara-db#{index}#
  from: fuel_resources/sahara-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: heat-db#{index}#
  from: fuel_resources/heat-db
  location: '#{node}#'
  values_from: role_data#{index}#
- id: rabbitmq#{index}#
  from: fuel_resources/rabbitmq
  location: '#{node}#'
  values_from: role_data#{index}#
- id: murano-rabbitmq#{index}#
  from: fuel_resources/murano-rabbitmq
  location: '#{node}#'
  values_from: role_data#{index}#
- id: apache#{index}#
  from: fuel_resources/apache
  location: '#{node}#'
  values_from: role_data#{index}#
- id: api-proxy#{index}#
  from: fuel_resources/api-proxy
  location: '#{node}#'
  values_from: role_data#{index}#
- id: memcached#{index}#
  from: fuel_resources/memcached
  location: '#{node}#'
  values_from: role_data#{index}#
- id: keystone#{index}#
  from: fuel_resources/keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: sahara-keystone#{index}#
  from: fuel_resources/sahara-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: neutron-keystone#{index}#
  from: fuel_resources/neutron-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: cinder-keystone#{index}#
  from: fuel_resources/cinder-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: glance-keystone#{index}#
  from: fuel_resources/glance-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: glance#{index}#
  from: fuel_resources/glance
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ironic-keystone#{index}#
  from: fuel_resources/ironic-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ironic-api#{index}#
  from: fuel_resources/ironic-api
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-cinder#{index}#
  from: fuel_resources/openstack-cinder
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ceilometer-keystone#{index}#
  from: fuel_resources/ceilometer-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ceilometer-controller#{index}#
  from: fuel_resources/ceilometer-controller
  location: '#{node}#'
  values_from: role_data#{index}#
- id: murano-keystone#{index}#
  from: fuel_resources/murano-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: workloads_collector_add#{index}#
  from: fuel_resources/workloads_collector_add
  location: '#{node}#'
  values_from: role_data#{index}#
- id: heat-keystone#{index}#
  from: fuel_resources/heat-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: swift-keystone#{index}#
  from: fuel_resources/swift-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: nova-keystone#{index}#
  from: fuel_resources/nova-keystone
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-controller#{index}#
  from: fuel_resources/openstack-controller
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ceph-mon#{index}#
  from: fuel_resources/ceph-mon
  location: '#{node}#'
  values_from: role_data#{index}#
- id: ceph-radosgw#{index}#
  from: fuel_resources/ceph-radosgw
  location: '#{node}#'
  values_from: role_data#{index}#
- id: heat#{index}#
  from: fuel_resources/heat
  location: '#{node}#'
  values_from: role_data#{index}#
- id: swift#{index}#
  from: fuel_resources/swift
  location: '#{node}#'
  values_from: role_data#{index}#
- id: swift-rebalance-cron#{index}#
  from: fuel_resources/swift-rebalance-cron
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-start#{index}#
  from: fuel_resources/openstack-network-start
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-common-config#{index}#
  from: fuel_resources/openstack-network-common-config
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-server-config#{index}#
  from: fuel_resources/openstack-network-server-config
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-plugins-l2#{index}#
  from: fuel_resources/openstack-network-plugins-l2
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-networks#{index}#
  from: fuel_resources/openstack-network-networks
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-routers#{index}#
  from: fuel_resources/openstack-network-routers
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-agents-l3#{index}#
  from: fuel_resources/openstack-network-agents-l3
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-server-nova#{index}#
  from: fuel_resources/openstack-network-server-nova
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-agents-dhcp#{index}#
  from: fuel_resources/openstack-network-agents-dhcp
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-agents-metadata#{index}#
  from: fuel_resources/openstack-network-agents-metadata
  location: '#{node}#'
  values_from: role_data#{index}#
- id: openstack-network-end#{index}#
  from: fuel_resources/openstack-network-end
  location: '#{node}#'
  values_from: role_data#{index}#
- id: horizon#{index}#
  from: fuel_resources/horizon
  location: '#{node}#'
  values_from: role_data#{index}#
- id: murano#{index}#
  from: fuel_resources/murano
  location: '#{node}#'
  values_from: role_data#{index}#
- id: sahara#{index}#
  from: fuel_resources/sahara
  location: '#{node}#'
  values_from: role_data#{index}#
- id: controller_remaining_tasks#{index}#
  from: fuel_resources/controller_remaining_tasks
  location: '#{node}#'
  values_from: role_data#{index}#
- id: vmware-vcenter#{index}#
  from: fuel_resources/vmware-vcenter
  location: '#{node}#'
  values_from: role_data#{index}#
events:
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: fuel_pkgs#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: logging#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: tools#{index}#.run
- type: depends_on
  state: success
  parent_action: logging#{index}#.run
  child_action: tools#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: umm#{index}#.run
- type: depends_on
  state: success
  parent_action: tools#{index}#.run
  child_action: umm#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: netconfig#{index}#.run
- type: depends_on
  state: success
  parent_action: tools#{index}#.run
  child_action: netconfig#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: connectivity_tests#{index}#.run
- type: depends_on
  state: success
  parent_action: netconfig#{index}#.run
  child_action: connectivity_tests#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: firewall#{index}#.run
- type: depends_on
  state: success
  parent_action: netconfig#{index}#.run
  child_action: firewall#{index}#.run
- type: depends_on
  state: success
  parent_action: connectivity_tests#{index}#.run
  child_action: firewall#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ssl-keys-saving#{index}#.run
- type: depends_on
  state: success
  parent_action: firewall#{index}#.run
  child_action: ssl-keys-saving#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ssl-add-trust-chain#{index}#.run
- type: depends_on
  state: success
  parent_action: firewall#{index}#.run
  child_action: ssl-add-trust-chain#{index}#.run
- type: depends_on
  state: success
  parent_action: ssl-keys-saving#{index}#.run
  child_action: ssl-add-trust-chain#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: hosts#{index}#.run
- type: depends_on
  state: success
  parent_action: netconfig#{index}#.run
  child_action: hosts#{index}#.run
- type: depends_on
  state: success
  parent_action: connectivity_tests#{index}#.run
  child_action: hosts#{index}#.run
- type: depends_on
  state: success
  parent_action: ssl-add-trust-chain#{index}#.run
  child_action: hosts#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: cluster#{index}#.run
- type: depends_on
  state: success
  parent_action: firewall#{index}#.run
  child_action: cluster#{index}#.run
- type: depends_on
  state: success
  parent_action: hosts#{index}#.run
  child_action: cluster#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: cluster_health#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster#{index}#.run
  child_action: cluster_health#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: cluster-vrouter#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster#{index}#.run
  child_action: cluster-vrouter#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: virtual_ips#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster#{index}#.run
  child_action: virtual_ips#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-vrouter#{index}#.run
  child_action: virtual_ips#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: conntrackd#{index}#.run
- type: depends_on
  state: success
  parent_action: virtual_ips#{index}#.run
  child_action: conntrackd#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: cluster-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster#{index}#.run
  child_action: cluster-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: virtual_ips#{index}#.run
  child_action: cluster-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-ceilometer#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-ceilometer#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-radosgw#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-radosgw#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-horizon#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-horizon#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-swift#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-swift#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-nova#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-nova#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-glance#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-glance#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-sahara#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-sahara#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-murano#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-murano#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-stats#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-stats#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-ironic#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-ironic#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-heat#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-heat#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-neutron#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-neutron#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy-mysqld#{index}#.run
- type: depends_on
  state: success
  parent_action: cluster-haproxy#{index}#.run
  child_action: openstack-haproxy-mysqld#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-ceilometer#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-radosgw#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-horizon#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-nova#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-mysqld#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-glance#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-heat#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-sahara#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-cinder#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-keystone#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-murano#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-stats#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-ironic#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-swift#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy-neutron#{index}#.run
  child_action: openstack-haproxy#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: dns-server#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: dns-server#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: database#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: database#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: keystone-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: keystone-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: glance-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: glance-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ironic-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: ironic-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: neutron-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: neutron-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: murano-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: murano-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: nova-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: nova-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: cinder-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: cinder-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: sahara-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: sahara-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: heat-db#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: heat-db#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: rabbitmq#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: rabbitmq#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: murano-rabbitmq#{index}#.run
- type: depends_on
  state: success
  parent_action: rabbitmq#{index}#.run
  child_action: murano-rabbitmq#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: apache#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: apache#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: api-proxy#{index}#.run
- type: depends_on
  state: success
  parent_action: apache#{index}#.run
  child_action: api-proxy#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: memcached#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: memcached#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone-db#{index}#.run
  child_action: keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: rabbitmq#{index}#.run
  child_action: keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: apache#{index}#.run
  child_action: keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: memcached#{index}#.run
  child_action: keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: sahara-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: sahara-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: neutron-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: neutron-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: cinder-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: cinder-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: glance-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: glance-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: glance#{index}#.run
- type: depends_on
  state: success
  parent_action: glance-keystone#{index}#.run
  child_action: glance#{index}#.run
- type: depends_on
  state: success
  parent_action: glance-db#{index}#.run
  child_action: glance#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: glance#{index}#.run
- type: depends_on
  state: success
  parent_action: rabbitmq#{index}#.run
  child_action: glance#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: glance#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ironic-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: ironic-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ironic-api#{index}#.run
- type: depends_on
  state: success
  parent_action: ironic-db#{index}#.run
  child_action: ironic-api#{index}#.run
- type: depends_on
  state: success
  parent_action: ironic-keystone#{index}#.run
  child_action: ironic-api#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: ironic-api#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: cinder-keystone#{index}#.run
  child_action: openstack-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: firewall#{index}#.run
  child_action: openstack-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: rabbitmq#{index}#.run
  child_action: openstack-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: openstack-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: cinder-db#{index}#.run
  child_action: openstack-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: hosts#{index}#.run
  child_action: openstack-cinder#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ceilometer-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: ceilometer-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ceilometer-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: ceilometer-keystone#{index}#.run
  child_action: ceilometer-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: ceilometer-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: murano-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: murano-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: workloads_collector_add#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: workloads_collector_add#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: heat-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: heat-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: swift-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: swift-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: nova-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: nova-keystone#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-cinder#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: database#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: nova-keystone#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: ceilometer-controller#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: rabbitmq#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: nova-db#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: keystone#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: ironic-api#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: glance#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-haproxy#{index}#.run
  child_action: openstack-controller#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ceph-mon#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-controller#{index}#.run
  child_action: ceph-mon#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: ceph-radosgw#{index}#.run
- type: depends_on
  state: success
  parent_action: apache#{index}#.run
  child_action: ceph-radosgw#{index}#.run
- type: depends_on
  state: success
  parent_action: ceph-mon#{index}#.run
  child_action: ceph-radosgw#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: heat#{index}#.run
- type: depends_on
  state: success
  parent_action: heat-db#{index}#.run
  child_action: heat#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-controller#{index}#.run
  child_action: heat#{index}#.run
- type: depends_on
  state: success
  parent_action: heat-keystone#{index}#.run
  child_action: heat#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: swift#{index}#.run
- type: depends_on
  state: success
  parent_action: ceilometer-controller#{index}#.run
  child_action: swift#{index}#.run
- type: depends_on
  state: success
  parent_action: swift-keystone#{index}#.run
  child_action: swift#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-controller#{index}#.run
  child_action: swift#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: swift-rebalance-cron#{index}#.run
- type: depends_on
  state: success
  parent_action: swift#{index}#.run
  child_action: swift-rebalance-cron#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-start#{index}#.run
- type: depends_on
  state: success
  parent_action: neutron-keystone#{index}#.run
  child_action: openstack-network-start#{index}#.run
- type: depends_on
  state: success
  parent_action: netconfig#{index}#.run
  child_action: openstack-network-start#{index}#.run
- type: depends_on
  state: success
  parent_action: neutron-db#{index}#.run
  child_action: openstack-network-start#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-controller#{index}#.run
  child_action: openstack-network-start#{index}#.run
- type: depends_on
  state: success
  parent:
    action: run
    with_tags:
    - resource=ironic-compute
  child_action: openstack-network-start#{index}#.run
- type: depends_on
  state: success
  parent:
    action: run
    with_tags:
    - resource=top-role-compute
  child_action: openstack-network-start#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-common-config#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-start#{index}#.run
  child_action: openstack-network-common-config#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-server-config#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-common-config#{index}#.run
  child_action: openstack-network-server-config#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-plugins-l2#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-server-config#{index}#.run
  child_action: openstack-network-plugins-l2#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-common-config#{index}#.run
  child_action: openstack-network-plugins-l2#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-networks#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-plugins-l2#{index}#.run
  child_action: openstack-network-networks#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-routers#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-networks#{index}#.run
  child_action: openstack-network-routers#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-agents-l3#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-plugins-l2#{index}#.run
  child_action: openstack-network-agents-l3#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-networks#{index}#.run
  child_action: openstack-network-agents-l3#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-routers#{index}#.run
  child_action: openstack-network-agents-l3#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-server-nova#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-agents-l3#{index}#.run
  child_action: openstack-network-server-nova#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-agents-dhcp#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-agents-l3#{index}#.run
  child_action: openstack-network-agents-dhcp#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-server-nova#{index}#.run
  child_action: openstack-network-agents-dhcp#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-common-config#{index}#.run
  child_action: openstack-network-agents-dhcp#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-agents-metadata#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-agents-l3#{index}#.run
  child_action: openstack-network-agents-metadata#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-server-nova#{index}#.run
  child_action: openstack-network-agents-metadata#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-agents-dhcp#{index}#.run
  child_action: openstack-network-agents-metadata#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-common-config#{index}#.run
  child_action: openstack-network-agents-metadata#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: neutron-keystone#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-common-config#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-server-config#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: neutron-db#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-networks#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-routers#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-server-nova#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-plugins-l2#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-agents-l3#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-agents-metadata#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-agents-dhcp#{index}#.run
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent:
    action: run
    with_tags:
    - resource=openstack-network-compute-nova
  child_action: openstack-network-end#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: horizon#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-controller#{index}#.run
  child_action: horizon#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: murano#{index}#.run
- type: depends_on
  state: success
  parent_action: heat#{index}#.run
  child_action: murano#{index}#.run
- type: depends_on
  state: success
  parent_action: murano-db#{index}#.run
  child_action: murano#{index}#.run
- type: depends_on
  state: success
  parent_action: murano-rabbitmq#{index}#.run
  child_action: murano#{index}#.run
- type: depends_on
  state: success
  parent_action: murano-keystone#{index}#.run
  child_action: murano#{index}#.run
- type: depends_on
  state: success
  parent_action: rabbitmq#{index}#.run
  child_action: murano#{index}#.run
- type: depends_on
  state: success
  parent_action: horizon#{index}#.run
  child_action: murano#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: sahara#{index}#.run
- type: depends_on
  state: success
  parent_action: sahara-keystone#{index}#.run
  child_action: sahara#{index}#.run
- type: depends_on
  state: success
  parent_action: openstack-network-end#{index}#.run
  child_action: sahara#{index}#.run
- type: depends_on
  state: success
  parent_action: sahara-db#{index}#.run
  child_action: sahara#{index}#.run
- type: depends_on
  state: success
  parent_action: horizon#{index}#.run
  child_action: sahara#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: controller_remaining_tasks#{index}#.run
- type: depends_on
  state: success
  parent_action: ceph-radosgw#{index}#.run
  child_action: controller_remaining_tasks#{index}#.run
- type: depends_on
  state: success
  parent_action: api-proxy#{index}#.run
  child_action: controller_remaining_tasks#{index}#.run
- type: depends_on
  state: success
  parent_action: murano#{index}#.run
  child_action: controller_remaining_tasks#{index}#.run
- type: depends_on
  state: success
  parent_action: sahara#{index}#.run
  child_action: controller_remaining_tasks#{index}#.run
- type: depends_on
  state: success
  parent_action: ceph-mon#{index}#.run
  child_action: controller_remaining_tasks#{index}#.run
- type: depends_on
  state: success
  parent_action: swift#{index}#.run
  child_action: controller_remaining_tasks#{index}#.run
- type: depends_on
  state: success
  parent_action: role_data#{index}#.run
  child_action: vmware-vcenter#{index}#.run
- type: depends_on
  state: success
  parent_action: controller_remaining_tasks#{index}#.run
  child_action: vmware-vcenter#{index}#.run
